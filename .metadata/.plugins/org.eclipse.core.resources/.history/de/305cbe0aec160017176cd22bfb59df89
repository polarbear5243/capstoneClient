#pragma once
#include<iostream>
#include<string>
#include<storage.h>
#include<dirent.h>
#include<unistd.h>

#define FILE_DEFULT_FOLDER "MyApp"

using namespace std;

class MyFileInput{
private:
	FILE* m_fp;
	string mFilePath;

public:
	MyFileInput(string file){
		char ** tmpPath;
		storage_get_root_directory(0,tmpPath);

		string defultPath = *tmpPath;
		defultPath = defultPath + "/" + FILE_DEFULT_FOLDER;

		if(access(defultPath.c_str(),F_OK) != 0){
			mkdir(defultPath.c_str(),0755);
		}

		mFilePath = defultPath + "/" + file;
		m_fp = fopen(mFilePath.c_str(), "r");

		if(m_fp == NULL)
			throw new exception;
	}
	int writeLine(string str) {
		fprintf(m_fp,"%s\n",str.c_str());
	    return 0;
	}
	int write(string str){
		fprintf(m_fp,"%s",str.c_str());
	}
	void closeFile(){
		fclose(m_fp);
	}
	~MyFileInput(){
		fclose(m_fp);
	}
};
